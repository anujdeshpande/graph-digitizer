
function crop(agr1)

fil=agr1;
imorig=imread(fil);
imgray=rgb2gray(imorig);
imbin=im2bw(imgray,0.8);
imedge=imbin;
#imwrite(imbin,'bin.jpg');
[h,w]=size(imedge);
wi=120;
hi=250;
#imedge(hi,wi)
while(imedge(hi,wi)==1)
wi+=1;
endwhile
#[hi,wi]
#imedge(hi,wi)
while(imedge(hi,wi)==0)
hi+=1;
endwhile
hi=hi-1;
#[hi,wi]
#imedge(hi,wi)
while(imedge(hi,wi)==0)
wi+=1;
endwhile
wi=wi-1;
#[hi,wi]
#imedge(hi,wi)
hi=250;
#[hi,wi]
#imedge(hi,wi)
wi=wi-3;
while(imedge(hi,wi)!=0)
wi=wi-1;
endwhile
#[hi,wi]
#imedge(hi,wi)
while(imedge(hi,wi)==0)
hi+=1;
endwhile
#[hi,wi]
#imedge(hi,wi)
h1=hi;
w1=wi;
hi=hi-3;
while(imedge(hi,wi)==0)
wi=wi-1;
endwhile
h2=hi;
w2=wi;
#[hi,wi]
#imedge(hi,wi)
wi=wi-1;
#hi=h1;
wi=w1;
while(imedge(hi,wi)==0)
hi-=1;
endwhile
h1=hi;
w1=wi;
#[h1,w1]
#imedge(h1,w1)
[h,w]=size(imorig);
l=h2-h1+2;
b=w1-w2;
#final=imorig(h:h+l-1, w:w+b-1);
#final=imorig;
#resize(circshift(final,-w,-h), b, l)
imorig=imread(fil);
#[h1,w2,b,l]
fin=imorig(h1:h1+l-1 ,w2:w2+b-1,:);
imwrite(fin,strcat(fil));
endfunction
